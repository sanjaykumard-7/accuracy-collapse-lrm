<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stage 5 ‚Äî Self-Consistency | Accuracy Collapse in LRMs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', sans-serif; }
    .terminal {
      background-color: #1e1e1e;
      color: #d4d4d4;
      font-family: 'Courier New', monospace;
      padding: 1rem;
      border-radius: 0.5rem;
      overflow-y: auto;
      white-space: pre-wrap;
      max-height: 400px;
    }
    .hidden { display: none; }
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- NAVBAR -->
  <nav class="bg-indigo-700 fixed w-full z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center text-white">
      <h1 class="text-xl md:text-2xl font-semibold tracking-wide">Accuracy Collapse in LRMs</h1>

      <div class="flex space-x-6 items-center">
        <a href="index.html" class="hover:text-violet-300 font-medium">Home</a>

        <div class="relative group">
          <button class="hover:text-violet-300 font-medium">Stages ‚ñº</button>
          <div class="absolute hidden group-hover:block bg-white text-gray-800 rounded-lg shadow-lg mt-2 py-2 w-64">
            <a href="stage1.html" class="block px-4 py-2 hover:bg-violet-100">Stage 1 ‚Äì Baseline</a>
            <a href="stage2.html" class="block px-4 py-2 hover:bg-violet-100">Stage 2 ‚Äì Dataset</a>
            <a href="stage3.html" class="block px-4 py-2 hover:bg-violet-100">Stage 3 ‚Äì Visualization</a>
            <a href="stage4.html" class="block px-4 py-2 hover:bg-violet-100">Stage 4 ‚Äì Decomposition</a>
            <a href="stage5.html" class="block px-4 py-2 hover:bg-violet-100 font-semibold text-indigo-700">Stage 5 ‚Äì Self-Consistency</a>
          </div>
        </div>

        <a href="code.html" class="hover:text-violet-300 font-medium">Code</a>
        <a href="about.html" class="hover:text-violet-300 font-medium">About</a>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="pt-28 pb-20 px-6 md:px-20 max-w-6xl mx-auto">

    <!-- HEADER -->
    <section class="text-center mb-10">
      <h2 class="text-3xl md:text-4xl font-extrabold text-indigo-700">Stage 5 ‚Äî Self-Consistency Inference</h2>
      <p class="text-gray-600 max-w-2xl mx-auto mt-3">
        This stage evaluates whether sampling multiple reasoning paths and selecting the majority answer 
        improves the accuracy of LRMs on difficult tasks.
      </p>
    </section>

    <!-- What this stage does -->
    <section class="bg-white p-8 rounded-xl shadow-lg mb-10">
      <h3 class="text-xl font-semibold text-violet-600 mb-4">What this stage does</h3>
      <p class="text-gray-700 mb-4">
        Self-consistency inference helps overcome reasoning instability.  
        Instead of generating a single answer per question, the model produces multiple sampled outputs,
        and we choose the answer that appears the most frequently.
      </p>

      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <h4 class="font-semibold mb-2">Key steps</h4>
          <ul class="list-disc list-inside text-gray-700 space-y-2">
            <li>Sample 10‚Äì20 reasoning paths per question.</li>
            <li>Normalize and compare each output.</li>
            <li>Compute the majority-vote final answer.</li>
            <li>Compare to ground-truth answers.</li>
            <li>Save updated accuracy results.</li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-2">Why this matters</h4>
          <p class="text-gray-700">
            LRMs often ‚Äúguess differently‚Äù each time for hard tasks.  
            By aggregating multiple outputs, we stabilize predictions and reduce collapse.
          </p>
        </div>
      </div>
    </section>

    <!-- DEMO -->
    <section class="text-center mb-10">
      <button id="runDemoBtn"
        class="bg-violet-600 hover:bg-violet-700 text-white px-6 py-2 rounded-lg shadow-lg transition">
        ‚ñ∂Ô∏è Run Self-Consistency Demo
      </button>

      <div id="demoOutput" class="hidden mt-6 max-w-3xl mx-auto">
        <div class="terminal" id="terminalOutput">
          Starting self-consistency inference...
        </div>
      </div>
    </section>

    <!-- SAMPLE RESULTS -->
    <section id="sampleTable" class="hidden mt-10">
      <h3 class="text-xl font-semibold text-center text-gray-700 mb-4">
        Sample Self-Consistency Results
      </h3>

      <div class="overflow-x-auto max-w-4xl mx-auto">
        <table class="min-w-full bg-white rounded-lg shadow-md overflow-hidden">
          <thead class="bg-indigo-600 text-white">
            <tr>
              <th class="py-2 px-4">Input</th>
              <th class="py-2 px-4">Majority Answer</th>
              <th class="py-2 px-4">Votes</th>
              <th class="py-2 px-4">Correct?</th>
            </tr>
          </thead>

          <tbody class="text-gray-700">
            <tr><td class="py-2 px-4">What is 12 √ó 3?</td><td class="py-2 px-4">36</td><td class="py-2 px-4">18/20</td><td class="py-2 px-4">‚úî</td></tr>
            <tr><td class="py-2 px-4">Next number: 3, 9, 27, ?</td><td class="py-2 px-4">81</td><td class="py-2 px-4">14/20</td><td class="py-2 px-4">‚úî</td></tr>
            <tr><td class="py-2 px-4">Compute (4 + 5) √ó 7</td><td class="py-2 px-4">63</td><td class="py-2 px-4">9/20</td><td class="py-2 px-4">‚úò</td></tr>
          </tbody>
        </table>
      </div>

      <div class="overflow-x-auto max-w-4xl mx-auto"></div>
      <h3 class="text-xl font-semibold text-center text-gray-700 mb-4">
        Final Comparison Plot
      </h3>
      </div>
      <div class="mt-8 text-center">
        <h4 class="font-semibold mb-3 text-indigo-700">Final Comparison Plot</h4>
        <img src="images/final_plot.png" class="rounded-lg shadow-md max-w-full" alt="Final Comparison Plot">
      </div>

      <div class="overflow-x-auto max-w-4xl mx-auto mt-8">
        <table class="min-w-full bg-white rounded-lg shadow-md overflow-hidden">
    
          <!-- Table Head -->
          <thead class="bg-indigo-600 text-white">
            <tr>
              <th class="py-2 px-4">Difficulty</th>
              <th class="py-2 px-4">Baseline Accuracy</th>
              <th class="py-2 px-4">Decomposition Accuracy</th>
              <th class="py-2 px-4">Self-Consistency Accuracy</th>
            </tr>
          </thead>

          <!-- Table Body -->
           <tbody class="text-gray-700 text-center">
            <tr>
              <td class="py-2 px-4">1</td>
              <td class="py-2 px-4">0.0</td>
              <td class="py-2 px-4">0.0</td>
              <td class="py-2 px-4">0.0</td>
            </tr>
             <tr class="bg-gray-50">
               <td class="py-2 px-4">2</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.0</td>
             </tr>
            <tr>
              <td class="py-2 px-4">3</td>
              <td class="py-2 px-4">0.1</td>
              <td class="py-2 px-4">0.0</td>
              <td class="py-2 px-4">0.0</td>
            </tr>
             <tr class="bg-gray-50">
               <td class="py-2 px-4">4</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.0</td>
             </tr>
             <tr>
               <td class="py-2 px-4">5</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.1</td>
             </tr>
            <tr class="bg-gray-50">
               <td class="py-2 px-4">6</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.0</td>
               <td class="py-2 px-4">0.0</td>
             </tr>
           </tbody>

        </table>
      </div>

    </section>

    <section id="finalTable" class="hidden mt-10"></section>
    

    <!-- BUTTONS -->
    <section class="text-center mt-10 space-x-4">
      <button onclick="window.location.href='code.html#stage5'"
        class="bg-gray-800 hover:bg-gray-900 text-white px-6 py-2 rounded-lg transition">
        üíª View Code
      </button>

      <button onclick="window.location.href='index.html'"
        class="bg-indigo-700 hover:bg-indigo-800 text-white px-6 py-2 rounded-lg transition">
        ‚¨Ö Back to Home
      </button>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="bg-indigo-700 text-white py-6 text-center">
    <p class="text-lg font-medium">Developed by <span class="text-violet-300">Sanjay Kumar D</span></p>
    <p class="text-sm mt-1">Guided by <strong>Mr. Rajesh N</strong> | MCA Department</p>
    <p class="text-xs text-gray-100 mt-2">¬© 2025 Accuracy Collapse in LRMs Project | All Rights Reserved</p>
  </footer>

  <!-- DEMO SCRIPT -->
  <script>
    const runBtn = document.getElementById("runDemoBtn");
    const outputBox = document.getElementById("demoOutput");
    const terminal = document.getElementById("terminalOutput");
    const sampleTable = document.getElementById("sampleTable");

    runBtn.addEventListener("click", () => {
      runBtn.disabled = true;
      outputBox.classList.remove("hidden");
      terminal.textContent = "Loading baseline results...\n";

      const steps = [
        "Sampling 20 reasoning paths per question...",
        "Normalizing predictions...",
        "Counting majority-vote answers...",
        "Comparing to ground truth...",
        "Calculating updated accuracy...",
        "Saving self-consistency output...",
      ];

      let i = 0;
      const interval = setInterval(() => {
        if (i < steps.length) {
          terminal.textContent += "\n" + steps[i];
          terminal.scrollTop = terminal.scrollHeight;
          i++;
        } else {
          clearInterval(interval);
          terminal.textContent += "\n\n‚úÖ Self-consistency evaluation complete!";
          sampleTable.classList.remove("hidden");
        }
      }, 900);
    });
  </script>

</body>
</html>
