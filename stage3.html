<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Stage 3 ‚Äî Baseline Evaluation | Accuracy Collapse in LRMs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; }
    .card { background: white; border-radius: 12px; box-shadow: 0 6px 18px rgba(15,23,42,0.08); }
    .terminal {
      background-color: #0f1724;
      color: #e6eef8;
      font-family: 'Courier New', monospace;
      padding: 1rem;
      border-radius: 0.5rem;
      white-space: pre-wrap;
      max-height: 340px;
      overflow-y: auto;
    }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 0.6rem 0.75rem; text-align: left; }
    th { background: #f8fafc; font-weight: 600; }
    td { background: white; }
    .hidden { display: none; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- NAVBAR -->
  <nav class="bg-indigo-700 fixed w-full z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center text-white">
      <h1 class="text-xl md:text-2xl font-semibold tracking-wide">Accuracy Collapse in LRMs</h1>

      <div class="flex space-x-6 items-center">
        <a href="index.html" class="hover:text-violet-300 font-medium">Home</a>

        <div class="relative group">
          <button class="hover:text-violet-300 font-medium">Stages ‚ñº</button>
          <div class="absolute hidden group-hover:block bg-white text-gray-800 rounded-lg shadow-lg mt-2 py-2 w-64">
            <a href="stage1.html" class="block px-4 py-2 hover:bg-violet-100">Stage 1 ‚Äì Baseline</a>
            <a href="stage2.html" class="block px-4 py-2 hover:bg-violet-100">Stage 2 ‚Äì Visualization</a>
            <a href="stage3.html" class="block px-4 py-2 hover:bg-violet-100 font-semibold text-indigo-700">Stage 3 ‚Äì Baseline Eval</a>
            <a href="stage4.html" class="block px-4 py-2 hover:bg-violet-100">Stage 4 ‚Äì Decomposition</a>
            <a href="stage5.html" class="block px-4 py-2 hover:bg-violet-100">Stage 5 ‚Äì Self-Consistency</a>
          </div>
        </div>

        <a href="code.html" class="hover:text-violet-300 font-medium">Code</a>
        <a href="about.html" class="hover:text-violet-300 font-medium">About</a>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="max-w-6xl mx-auto px-6 pt-32 pb-20">

    <!-- Header -->
    <header class="mb-8 text-center">
      <h2 class="text-3xl md:text-4xl font-extrabold text-indigo-700">Stage 3 ‚Äî Baseline Evaluation</h2>
      <p class="text-gray-600 mt-3 max-w-2xl mx-auto">
        Run the baseline evaluation pipeline (detailed demo). This stage measures model performance across task difficulty and saves `baseline_results.csv`.
      </p>
    </header>

    <!-- Description -->
    <section class="card p-8 mb-8">
      <h3 class="text-xl font-semibold text-violet-600 mb-3">Goal</h3>
      <p class="text-gray-700 mb-4">
        Execute a full baseline evaluation: load model, generate tasks, run inference, normalize outputs, compute per-level accuracy, and save results.
      </p>
      <p class="text-gray-600">Use the demo to step through the pipeline visually (14 detailed steps).</p>
    </section>

    <!-- Demo control -->
    <section class="text-center mb-6">
      <button id="runDemoBtn" class="bg-violet-600 text-white px-6 py-2 rounded-lg hover:bg-violet-700 transition-all">
        ‚ñ∂Ô∏è Run Baseline Demo
      </button>
    </section>

    <!-- Demo Terminal -->
    <section id="demoArea" class="card p-6 mb-8 hidden">
      <h3 class="text-lg font-semibold text-indigo-700 mb-3">Baseline Pipeline ‚Äî Live Demo</h3>
      <div class="terminal" id="terminalOutput">Waiting to start...</div>
    </section>

    <!-- Results area (revealed after demo) -->
    <section id="resultsArea" class="card p-8 mb-8 hidden">
      <h3 class="text-xl font-semibold text-violet-600 mb-4">Baseline Results & Summary</h3>

      <div class="grid md:grid-cols-2 gap-6">
        <!-- left: graph -->
        <div>
          <h4 class="font-semibold mb-2 text-indigo-700">Accuracy vs Difficulty (Baseline)</h4>
          <div class="flex justify-center mb-4">
            <img src="images/baseline.png" alt="Baseline Accuracy" class="rounded-lg shadow-md max-w-full">
          </div>
        </div>

        <!-- right: sample results table + metrics -->
        <div>
          <h4 class="font-semibold mb-2 text-indigo-700">Sample Output (excerpt)</h4>
          <div class="overflow-x-auto mb-4">
            <table class="w-full bg-white rounded-lg shadow-sm">
              <thead>
                <tr>
                  <th>Input</th>
                  <th>Expected</th>
                  <th>Predicted</th>
                  <th>Difficulty</th>
                </tr>
              </thead>
              <tbody>
                <tr><td class="py-2 px-3">What is 4 + 4?</td><td class="py-2 px-3">8</td><td class="py-2 px-3">8</td><td class="py-2 px-3">1</td></tr>
                <tr><td class="py-2 px-3">What is 11 - 7?</td><td class="py-2 px-3">4</td><td class="py-2 px-3">4</td><td class="py-2 px-3">1</td></tr>
                <tr><td class="py-2 px-3">Calculate (3 + 5) √ó 4</td><td class="py-2 px-3">32</td><td class="py-2 px-3">0</td><td class="py-2 px-3">3</td></tr>
                <tr><td class="py-2 px-3">Next in [2,4,8,16,32]</td><td class="py-2 px-3">64</td><td class="py-2 px-3">4</td><td class="py-2 px-3">6</td></tr>
                <tr><td class="py-2 px-3">What is 13 + 12?</td><td class="py-2 px-3">25</td><td class="py-2 px-3">0</td><td class="py-2 px-3">2</td></tr>
              </tbody>
            </table>
          </div>

          <h4 class="font-semibold mb-2 text-indigo-700">Accuracy Summary (example)</h4>
          <div class="overflow-x-auto">
            <table class="w-full bg-white rounded-lg shadow-sm">
              <thead>
                <tr><th>Difficulty</th><th>Accuracy</th></tr>
              </thead>
              <tbody>
                <tr><td class="py-2 px-3">1</td><td class="py-2 px-3">0.92</td></tr>
                <tr><td class="py-2 px-3">2</td><td class="py-2 px-3">0.78</td></tr>
                <tr><td class="py-2 px-3">3</td><td class="py-2 px-3">0.45</td></tr>
                <tr><td class="py-2 px-3">4</td><td class="py-2 px-3">0.22</td></tr>
                <tr><td class="py-2 px-3">5</td><td class="py-2 px-3">0.10</td></tr>
                <tr><td class="py-2 px-3">6</td><td class="py-2 px-3">0.04</td></tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </section>

    <!-- Actions -->
    <section class="flex flex-col md:flex-row items-center justify-between gap-4 mt-6">
      <div class="flex gap-4">
        <a href="code.html#code3" class="bg-gray-800 hover:bg-gray-900 text-white px-5 py-3 rounded-xl shadow-lg transition">üíª View Code</a>
      </div>
      <a href="stage4.html" class="bg-indigo-700 hover:bg-indigo-800 text-white px-5 py-3 rounded-xl shadow-lg transition">Next: Stage 4 ‚Üí</a>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="bg-indigo-700 text-white py-6 text-center">
    <p class="text-lg font-medium">Developed by <span class="text-violet-300">Sanjay Kumar D</span></p>
    <p class="text-sm mt-1">Guided by <strong>Mr. Rajesh N</strong> | MCA Department</p>
    <p class="text-xs text-gray-100 mt-2">¬© 2025 Accuracy Collapse in LRMs Project | All Rights Reserved</p>
  </footer>

  <!-- DEMO SCRIPT: 14 detailed steps (Option 3) -->
  <script>
    const runBtn = document.getElementById('runDemoBtn');
    const demoArea = document.getElementById('demoArea');
    const terminal = document.getElementById('terminalOutput');
    const resultsArea = document.getElementById('resultsArea');

    const steps = [
      "Initializing baseline evaluation engine...",
      "Importing required modules...",
      "Loading Flan-T5 model weights...",
      "Loading tokenizer...",
      "Preparing difficulty levels (1 ‚Üí 6)...",
      "Generating 60 arithmetic reasoning samples...",
      "Preprocessing text prompts...",
      "Running model predictions for all samples...",
      "Decoding token outputs to text...",
      "Normalizing numeric responses (words ‚Üí digits)...",
      "Comparing predictions with ground truth...",
      "Aggregating accuracy metrics per difficulty...",
      "Saving baseline_results.csv to project folder...",
      "Finalizing Stage 3 outputs..."
    ];

    runBtn.addEventListener('click', () => {
      runBtn.disabled = true;
      demoArea.classList.remove('hidden');
      terminal.textContent = "Starting baseline evaluation...\n";

      let i = 0;
      const interval = setInterval(() => {
        if (i < steps.length) {
          terminal.textContent += "\n" + steps[i];
          terminal.scrollTop = terminal.scrollHeight;
          i++;
        } else {
          clearInterval(interval);
          setTimeout(() => {
            terminal.textContent += "\n\n‚úÖ Baseline evaluation complete!";
            terminal.scrollTop = terminal.scrollHeight;
            resultsArea.classList.remove('hidden');
            // scroll to results area smoothly
            setTimeout(() => {
              window.scrollTo({ top: resultsArea.offsetTop - 120, behavior: 'smooth' });
            }, 250);
          }, 700);
        }
      }, 900);
    });
  </script>

</body>
</html>
