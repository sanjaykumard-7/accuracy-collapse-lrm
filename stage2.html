<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Stage 2 ‚Äî Visualization & Demo | Accuracy Collapse in LRMs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', sans-serif; }
    .card { background: white; border-radius: 12px; box-shadow: 0 6px 18px rgba(15,23,42,0.08); }
    .terminal {
      background-color: #0f1724;
      color: #e6eef8;
      font-family: 'Courier New', monospace;
      padding: 1rem;
      border-radius: 0.5rem;
      white-space: pre-wrap;
      max-height: 300px;
      overflow-y: auto;
    }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 0.6rem 0.75rem; text-align: left; }
    th { background: #f8fafc; font-weight: 600; }
    td { background: white; }
    .hidden { display: none; }
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- NAVBAR -->
  <nav class="bg-indigo-700 fixed w-full z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center text-white">
      <h1 class="text-xl md:text-2xl font-semibold tracking-wide">Accuracy Collapse in LRMs</h1>

      <div class="flex space-x-6 items-center">
        <a href="index.html" class="hover:text-violet-300 font-medium">Home</a>

        <!-- Stages Dropdown -->
        <div class="relative group">
          <button class="hover:text-violet-300 font-medium">Stages ‚ñº</button>
          <div class="absolute hidden group-hover:block bg-white text-gray-800 rounded-lg shadow-lg mt-2 py-2 w-64">
            <a href="stage1.html" class="block px-4 py-2 hover:bg-violet-100">Stage 1 ‚Äì Baseline</a>
            <a href="stage2.html" class="block px-4 py-2 hover:bg-violet-100 font-semibold text-indigo-700">Stage 2 ‚Äì Visualization</a>
            <a href="stage3.html" class="block px-4 py-2 hover:bg-violet-100">Stage 3 ‚Äì Dataset / Mitigation</a>
            <a href="stage4.html" class="block px-4 py-2 hover:bg-violet-100">Stage 4 ‚Äì Decomposition</a>
            <a href="stage5.html" class="block px-4 py-2 hover:bg-violet-100">Stage 5 ‚Äì Self-Consistency</a>
          </div>
        </div>

        <a href="code.html" class="hover:text-violet-300 font-medium">Code</a>
        <a href="about.html" class="hover:text-violet-300 font-medium">About</a>
      </div>
    </div>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="max-w-6xl mx-auto px-6 pt-32 pb-20">

    <!-- HEADER -->
    <header class="mb-8 text-center">
      <h2 class="text-3xl md:text-4xl font-extrabold text-indigo-700">Stage 2 ‚Äî Visualization & Demo</h2>
      <p class="text-gray-600 mt-3 max-w-2xl mx-auto">
        Load the baseline results, compute accuracy statistics, and visualize collapse patterns.
      </p>
    </header>

    <!-- DESCRIPTION -->
    <section class="card p-8 mb-8">
      <h3 class="text-xl font-semibold text-violet-600 mb-3">What this stage does</h3>
      <p class="text-gray-700 mb-4">
        Stage 2 loads <strong>baseline_results.csv</strong> and generates:
      </p>
      <ul class="list-disc list-inside text-gray-700 space-y-2 mb-2">
        <li>Accuracy vs. Difficulty Plot</li>
        <li>Token Length vs. Difficulty Plot</li>
        <li>Summarized Accuracy Table</li>
      </ul>
    </section>

    <!-- DEMO BUTTON -->
    <section class="text-center mb-8">
      <button id="runDemoBtn" class="bg-violet-600 text-white px-6 py-2 rounded-lg hover:bg-violet-700 transition-all">
        ‚ñ∂Ô∏è Run Visualization Demo
      </button>
    </section>

    <!-- DEMO TERMINAL (ALWAYS REMAINS AFTER RUN) -->
    <section id="demoArea" class="card p-6 mb-8 hidden">
      <h3 class="text-lg font-semibold text-indigo-700 mb-3">Demo Process</h3>
      <div class="terminal" id="terminalOutput">Initializing...</div>
    </section>

    <!-- RESULTS -->
    <section id="resultsArea" class="card p-8 mb-8 hidden">
      <h3 class="text-xl font-semibold text-violet-600 mb-4">Visualization Results</h3>

      <div class="grid md:grid-cols-2 gap-6 items-start">

        <!-- GRAPH IMAGES -->
        <div>
          <h4 class="font-semibold mb-2 text-indigo-700">Accuracy vs Difficulty</h4>
          <div class="flex justify-center mb-4">
            <img src="images/baseline.png" class="rounded-lg shadow-md max-w-full">
          </div>

          <h4 class="font-semibold mb-2 text-indigo-700">Token Length vs Difficulty</h4>
          <div class="flex justify-center">
            <img src="images/token_length.png" class="rounded-lg shadow-md max-w-full">
          </div>
        </div>

        <!-- SUMMARY TABLE -->
        <div>
          <h4 class="font-semibold mb-2 text-indigo-700">Summary Table</h4>
          <p class="text-gray-700 mb-3">Aggregated metrics extracted from the baseline dataset.</p>

          <div class="overflow-x-auto">
            <table class="w-full bg-white rounded-lg shadow-sm">
              <thead>
                <tr>
                  <th>Difficulty</th>
                  <th>Accuracy</th>
                  <th>Avg Token Length</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>1</td><td>0.92</td><td>3.8</td></tr>
                <tr><td>2</td><td>0.86</td><td>4.1</td></tr>
                <tr><td>3</td><td>0.52</td><td>7.6</td></tr>
                <tr><td>4</td><td>0.28</td><td>9.9</td></tr>
                <tr><td>5</td><td>0.14</td><td>16.3</td></tr>
                <tr><td>6</td><td>0.06</td><td>18.9</td></tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </section>

    <!-- ACTIONS -->
    <section class="flex flex-col md:flex-row items-center justify-between gap-4 mt-6">
      <div class="flex gap-4">
        <a href="code.html#code2" class="bg-gray-800 hover:bg-gray-900 text-white px-5 py-3 rounded-xl shadow-lg transition">üíª View Code</a>
      </div>
      <a href="stage3.html" class="bg-indigo-700 hover:bg-indigo-800 text-white px-5 py-3 rounded-xl shadow-lg transition">Next: Stage 3 ‚Üí</a>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="bg-indigo-700 text-white py-6 text-center">
    <p class="text-lg font-medium">Developed by <span class="text-violet-300">Sanjay Kumar D</span></p>
    <p class="text-sm mt-1">Guided by <strong>Mr. Rajesh N</strong> | MCA Department</p>
    <p class="text-xs text-gray-100 mt-2">¬© 2025 Accuracy Collapse in LRMs Project | All Rights Reserved</p>
  </footer>

  <!-- DEMO SCRIPT -->
  <script>
    const runBtn = document.getElementById('runDemoBtn');
    const demoArea = document.getElementById('demoArea');
    const terminal = document.getElementById('terminalOutput');
    const resultsArea = document.getElementById('resultsArea');

    runBtn.addEventListener('click', () => {
      runBtn.disabled = true;
      demoArea.classList.remove('hidden');
      terminal.textContent = "Loading baseline_results.csv ...\n";

      const steps = [
       "Extracting difficulty, accuracy, and token length data...",
       "Grouping results by difficulty level...",
       "Computing mean accuracy for each difficulty...",
       "Computing average token length per difficulty...",
       "Generating Accuracy vs Difficulty plot...",
       "Generating Token Length vs Difficulty plot...",
       "Saving images to /images/...",
       "Preparing summary table..."
      ];

     let i = 0;

     const interval = setInterval(() => {
       if (i < steps.length) {
         terminal.textContent += "\n" + steps[i];
         terminal.scrollTop = terminal.scrollHeight;
         i++;
      } else {
         clearInterval(interval);
         setTimeout(() => {
           terminal.textContent += "\n\n‚úÖ Visualization complete!";
           terminal.scrollTop = terminal.scrollHeight;
           resultsArea.classList.remove('hidden');
         }, 600);
       }
      }, 900);

    });
  </script>

</body>
</html>
