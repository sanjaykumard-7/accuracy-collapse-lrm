<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Stage 4 ‚Äî Task Decomposition | Accuracy Collapse in LRMs</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', sans-serif; }
    .card { background: white; border-radius: 12px; box-shadow: 0 6px 18px rgba(15,23,42,0.08); }
    .terminal {
      background-color: #0f1724;
      color: #e6eef8;
      font-family: "Courier New", monospace;
      padding: 1rem;
      border-radius: 0.5rem;
      max-height: 340px;
      white-space: pre-wrap;
      overflow-y: auto;
    }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 0.6rem 0.75rem; text-align: left; }
    th { background: #f8fafc; font-weight: 600; }
    td { background: white; }
    .hidden { display: none; }
  </style>
</head>

<body class="bg-gray-50 text-gray-800">

  <!-- NAVBAR -->
  <nav class="bg-indigo-700 fixed w-full z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-6 py-3 flex justify-between items-center text-white">
      <h1 class="text-xl md:text-2xl font-semibold tracking-wide">Accuracy Collapse in LRMs</h1>

      <div class="flex space-x-6 items-center">
        <a href="index.html" class="hover:text-violet-300 font-medium">Home</a>

        <div class="relative group">
          <button class="hover:text-violet-300 font-medium">Stages ‚ñº</button>
          <div class="absolute hidden group-hover:block bg-white text-gray-800 rounded-lg shadow-lg mt-2 py-2 w-64">
            <a href="stage1.html" class="block px-4 py-2 hover:bg-violet-100">Stage 1 ‚Äì Architecture</a>
            <a href="stage2.html" class="block px-4 py-2 hover:bg-violet-100">Stage 2 ‚Äì Dataset Gen</a>
            <a href="stage3.html" class="block px-4 py-2 hover:bg-violet-100">Stage 3 ‚Äì Baseline Eval</a>
            <a href="stage4.html" class="block px-4 py-2 hover:bg-violet-100 font-semibold text-indigo-700">Stage 4 ‚Äì Task Decomposition</a>
            <a href="stage5.html" class="block px-4 py-2 hover:bg-violet-100">Stage 5 ‚Äì Self-Consistency</a>
          </div>
        </div>

        <a href="code.html" class="hover:text-violet-300 font-medium">Code</a>
        <a href="about.html" class="hover:text-violet-300 font-medium">About</a>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="max-w-6xl mx-auto px-6 pt-32 pb-20">

    <!-- Header -->
    <header class="mb-8 text-center">
      <h2 class="text-3xl md:text-4xl font-extrabold text-indigo-700">Stage 4 ‚Äî Task Decomposition</h2>
      <p class="text-gray-600 mt-3 max-w-2xl mx-auto">
        In this stage, each complex reasoning task is broken into multiple smaller steps using decomposition prompts.  
        This helps understand whether a model performs better when guided step-by-step.
      </p>
    </header>

    <!-- Description -->
    <section class="card p-8 mb-8">
      <h3 class="text-xl font-semibold text-violet-600 mb-3">Goal</h3>
      <p class="text-gray-700 mb-4">
        Apply a chain-of-thought decomposition strategy to tasks of difficulty level 3‚Äì6.  
        The model first produces intermediate steps, then a final answer.
      </p>

      <p class="text-gray-600">Run the demo below to see the full decomposition pipeline in action.</p>
    </section>

    <!-- Demo -->
    <section class="text-center mb-6">
      <button id="runDemoBtn" class="bg-violet-600 text-white px-6 py-2 rounded-lg hover:bg-violet-700 transition">
        ‚ñ∂Ô∏è Run Decomposition Demo
      </button>
    </section>

    <!-- Terminal Output -->
    <section id="demoArea" class="card p-6 mb-10 hidden">
      <h3 class="text-lg font-semibold text-indigo-700 mb-3">Decomposition Pipeline ‚Äî Live Demo</h3>
      <div class="terminal" id="terminalOutput">Waiting to start...</div>
    </section>

    <!-- RESULTS -->
    <section id="resultsArea" class="card p-8 mb-10 hidden">
      <h3 class="text-xl font-semibold text-violet-600 mb-4">Stage 4 ‚Äî Decomposition Results</h3>

      <div class="grid md:grid-cols-2 gap-6">

        <!-- Example Decomposition -->
        <div>
          <h4 class="font-semibold mb-2 text-indigo-700">Example Decomposed Reasoning</h4>
          <div class="bg-gray-100 p-4 rounded-lg text-sm leading-relaxed shadow">
            <p><strong>Task:</strong> If A=3 and B=5, compute (A + B) √ó 4</p>
            <p class="mt-3"><strong>Decomposed Steps:</strong></p>
            <ul class="list-disc pl-5 mt-2">
              <li>Identify A = 3</li>
              <li>Identify B = 5</li>
              <li>Compute A + B = 8</li>
              <li>Multiply result by 4 ‚Üí 8 √ó 4 = 32</li>
            </ul>
            <p class="mt-3"><strong>Final Answer:</strong> 32</p>
          </div>
        </div>

        <!-- Decomposition Accuracy -->
        <div>
          <h4 class="font-semibold mb-2 text-indigo-700">Accuracy Comparison (Example)</h4>
          <div class="overflow-x-auto">
            <table class="w-full rounded-lg shadow">
              <thead>
                <tr>
                  <th>Difficulty</th>
                  <th>Baseline Accuracy</th>
                  <th>Decomposition Accuracy</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>3</td><td>0.45</td><td>0.61</td></tr>
                <tr><td>4</td><td>0.22</td><td>0.47</td></tr>
                <tr><td>5</td><td>0.10</td><td>0.29</td></tr>
                <tr><td>6</td><td>0.04</td><td>0.18</td></tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>

      <!-- Decomposition Graph -->
      <div class="mt-8 text-center">
        <h4 class="font-semibold mb-3 text-indigo-700">Improvement Graph (Decomposition)</h4>
        <img src="images/decomposition.png" class="rounded-lg shadow-md max-w-full" alt="Decomposition Graph">
      </div>

    </section>

    <!-- Buttons -->
    <section class="flex flex-col md:flex-row justify-between items-center gap-4 mt-6">
      <a href="code.html#code4" class="bg-gray-800 hover:bg-gray-900 text-white px-5 py-3 rounded-xl shadow-lg transition">
        üíª View Code
      </a>
      <a href="stage5.html" class="bg-indigo-700 hover:bg-indigo-800 text-white px-5 py-3 rounded-xl shadow-lg transition">
        Next: Stage 5 ‚Üí
      </a>
    </section>

  </main>

  <!-- FOOTER -->
  <footer class="bg-indigo-700 text-white py-6 text-center">
    <p class="text-lg font-medium">Developed by <span class="text-violet-300">Sanjay Kumar D</span></p>
    <p class="text-sm mt-1">Guided by <strong>Mr. Rajesh N</strong> | MCA Department</p>
    <p class="text-xs text-gray-200 mt-2">¬© 2025 Accuracy Collapse in LRMs Project | All Rights Reserved</p>
  </footer>

  <!-- DEMO SCRIPT -->
  <script>
    const runBtn = document.getElementById("runDemoBtn");
    const demoArea = document.getElementById("demoArea");
    const terminal = document.getElementById("terminalOutput");
    const resultsArea = document.getElementById("resultsArea");

    const steps = [
      "Initializing decomposition module...",
      "Importing Flan-T5 model and tokenizer...",
      "Loading tasks of difficulty levels 3 ‚Üí 6...",
      "Preparing decomposition prompt template...",
      "Generating intermediate reasoning hints...",
      "Splitting complex tasks into atomic subtasks...",
      "Feeding decomposed steps into model...",
      "Model generating chain-of-thought reasoning...",
      "Extracting intermediate results...",
      "Computing final predicted output...",
      "Comparing predictions with ground truth...",
      "Aggregating decomposition accuracy...",
      "Saving results into decomposition_results.csv...",
      "Finalizing Stage 4 artifacts..."
    ];

    runBtn.addEventListener("click", () => {
      runBtn.disabled = true;
      demoArea.classList.remove("hidden");
      terminal.textContent = "Starting task decomposition...\n";

      let i = 0;
      const interval = setInterval(() => {
        if (i < steps.length) {
          terminal.textContent += "\n" + steps[i];
          terminal.scrollTop = terminal.scrollHeight;
          i++;
        } else {
          clearInterval(interval);
          setTimeout(() => {
            terminal.textContent += "\n\n‚úÖ Task decomposition complete!";
            terminal.scrollTop = terminal.scrollHeight;
            resultsArea.classList.remove("hidden");

            setTimeout(() => {
              window.scrollTo({ top: resultsArea.offsetTop - 120, behavior: "smooth" });
            }, 350);

          }, 700);
        }
      }, 900);
    });
  </script>

</body>
</html>
